syntax = "proto3";

package api;

option go_package = "github.com/lk2023060901/xdooria-proto-api;api";

import "role_type.proto";

// AuthRequest 网关首次认证请求 (OP_AUTH_REQ)
message AuthRequest {
    string login_token = 1;  // Login 服务签发的 token
}

// AuthResponse 网关认证响应 (OP_AUTH_RES)
message AuthResponse {
    uint32 code = 1;           // 错误码
    string token = 2;          // Gateway 签发的会话 token
    uint64 uid = 3;            // 用户ID
}

// ReconnectRequest 网关重连请求 (OP_RECONNECT_REQ)
message ReconnectRequest {
    string token = 1;  // Gateway 签发的 token
}

// ReconnectResponse 网关重连响应 (OP_RECONNECT_RES)
message ReconnectResponse {
    uint32 code = 1;   // 错误码
    string token = 2;  // 新的 token (续期)
}

// SelectRoleRequest 选择角色请求 (OP_SELECT_ROLE_REQ)
message SelectRoleRequest {
    int64 role_id = 1;  // 要选择的角色ID
}

// SelectRoleResponse 选择角色响应 (OP_SELECT_ROLE_RES)
message SelectRoleResponse {
    uint32 code = 1;        // 错误码
    int64 role_id = 2;      // 已选择的角色ID
}

// CreateRoleRequest 创建角色请求 (OP_CREATE_ROLE_REQ)
message CreateRoleRequest {
    string nickname = 1;    // 角色昵称
    int32 gender = 2;       // 性别 (0=未知, 1=男, 2=女)
    string appearance = 3;  // 外观数据（JSON 或配置ID）
}

// CreateRoleResponse 创建角色响应 (OP_CREATE_ROLE_RES)
message CreateRoleResponse {
    uint32 code = 1;           // 错误码
    RoleInfo role = 2;    // 创建成功的角色信息
}

// GetRolesRequest 获取角色列表请求 (OP_GET_ROLES_REQ)
message GetRolesRequest {
    // 无需参数，从 Session 中获取 uid
}

// GetRolesResponse 获取角色列表响应 (OP_GET_ROLES_RES)
message GetRolesResponse {
    uint32 code = 1;                   // 错误码
    repeated RoleInfo roles = 2;  // 该账号下的所有角色
}
